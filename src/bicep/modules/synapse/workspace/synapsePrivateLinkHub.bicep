///////////////////////////////////////////////////////////////////////////////////////////////////////
// Copyright (c) 2021-2022 Microsoft Corporation. All rights reserved. This
// Software is licensed under the MIT License. See LICENSE in the project root
// for license information.
///////////////////////////////////////////////////////////////////////////////////////////////////////
//
// Module Description : 
// This module creates private link hub
//
// Assign appropriate values as needed. If needed override global parameters
//
///////////////////////////////////////////////////////////////////////////////////////////////////////

///////////////////////////////////////////////////////////////////////////////////////////////////////
// Section for Bicep parameters
///////////////////////////////////////////////////////////////////////////////////////////////////////

@description('Location of Synapse workspace resource group')
param p_location string = resourceGroup().location

@description('Prefix for  resource name')
param p_nameIdentifier string

@description('The tags to associate with the resource group.')
param p_tags object

param v_mddTag object = {
  mdd: 'mdd1'
}

///////////////////////////////////////////////////////////////////////////////////////////////////////
// Section for Bicep variables
///////////////////////////////////////////////////////////////////////////////////////////////////////

var v_tags = union(v_mddTag, p_tags)

var v_privateLinkHubName = toLower(replace('plh-${p_nameIdentifier}', '-', ''))

 
///////////////////////////////////////////////////////////////////////////////////////////////////////
// Section for Bicep resources
///////////////////////////////////////////////////////////////////////////////////////////////////////

resource synapsePrivateLinkHub 'Microsoft.Synapse/privateLinkHubs@2021-06-01' = {
  name: take('plh${v_privateLinkHubName}',45)
  location: p_location
  tags: v_tags
  properties: {}
}

///////////////////////////////////////////////////////////////////////////////////////////////////////
// Output Section
///////////////////////////////////////////////////////////////////////////////////////////////////////

output o_synapsePrivateLinkHubId string = synapsePrivateLinkHub.id
